"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{}},methods:{getDefinition:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.dataProvider({formType:this.formType,command:"def"}).then(function(i){if(!e)return i;t.createRocketFormDefinition(i)})},getData:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.value)return this.dataProvider({formType:this.formType,command:"get",id:this.value}).then(function(i){if(!e)return i;t.formData=t.prepareIncomingData(i)})},submitData:function(t){return this.isEditMode?this.saveRecord(t):this.createRecord(t)},saveRecord:function(t){var e=this;this.dataProvider({formType:"edit",command:"save",data:this.prepareDataForSubmission(t)}).then(function(t){e.formData=e.prepareIncomingData(t),e.$emit("saved",t)})},deleteRecord:function(){var t=this;this.dataProvider({formType:"delete",command:"delete",id:this.value}).then(function(){t.$emit("delete")})},createRecord:function(t){var e=this;this.dataProvider({formType:"add",command:"createThenEdit",data:this.prepareDataForSubmission(t)}).then(function(t){e.prepareDataAndDefinition(t.def,t.data),e.$emit("input",e.formData[e.serverDefinition.primaryKey]),e.$emit("created",e.formData)})},getDataAndDefinition:function(){var t=this;if(this.value)return this.dataProvider({formType:this.formType,command:"defGet",id:this.value}).then(function(e){t.prepareDataAndDefinition(e.def,e.data)})},prepareDataAndDefinition:function(t,e){this.definition=[],this.createRocketFormDefinition(t),this.formData=this.prepareIncomingData(e)}}};